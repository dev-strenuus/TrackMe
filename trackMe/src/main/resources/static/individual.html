<!doctype html>
<html>
<title>TrackMe</title>

<script src="js/angular/angular.min.js"></script>
<script src="js/individual.js"></script>
<head>
    <link rel="stylesheet" type="text/css" href="css/individual.css">
</head>


<body ng-app="individual">

<div ng-controller="individualSignUpController" ng-show="sharedDataService.signUp">
    <h1>Sign up:</h1>
    <form ng-submit="submitSignUp()">

        <p>Fiscal code: <input type="text" ng-model="individual.fiscalCode" pattern=".{16}"
                               title="Field must be 16 characters long" required/>
        <p>Name: <input type="text" ng-model="individual.name" minlength="4" maxlength="50" title="Insert your name"
                        required></p>
        <p>Surname: <input type="text" ng-model="individual.surname" title="Insert your surname" required></p>
        <p>Password: <input type="password" ng-model="individual.password" minlength="6" title="Insert your password"
                            required></p>
        <!--
         <p>Birth date: <input type="date" ng-model="individual.birthDate" required></p>
         <p>Country: <input type="text" ng-model="individual.country" required></p>
         <p>City: <input type="text" ng-model="individual.city" required></p>
         <p>Street:<input type="text" ng-model="individual.street" required></p>
         <p>Number: <input type="text" ng-model="individual.number" required></p>
         <p>Zip code: <input type="number" ng-model="individual.zipCode" size="5" required></p>
         -->
        <p>I accept the agreement!<input type="checkbox" title="You must agree our terms to use our services" required>
        </p>
        <input type="submit" id="submitSignUp" value="Submit">
    </form>
</div>

<div ng-controller="individualLoginController" ng-show="sharedDataService.login">
    <h1>Login:</h1>
    <form ng-submit="submitLogin()">
        <p>Fiscal code: <input type="text" ng-model="credentials.username" pattern=".{16}"
                               title="Field must be 16 characters long" required></p>
        <p>Password: <input type="password" ng-model="credentials.password" title="Insert your password" required></p>
        <input type="submit" id="submitLogin" value="Login">
    </form>
    <div>
        <p>If you do not have an account, please sign up</p>
        <button ng-click="showSignUp()">Sign up</button>
    </div>
</div>

<div ng-controller="individualController" ng-show="sharedDataService.home">
    <h1>Choose one option:</h1>
    <div>
        <button ng-click="showNotifications()">Notifications</button>
    </div>
    <div>
        <button ng-click="showSettings()">Settings</button>
    </div>
    <div>
        <button ng-controller="individualLogoutController" ng-click="logout()">Logout</button>
    </div>
</div>

<div ng-controller="individualNotificationsController" ng-show="sharedDataService.notifications">
    <h1>All your new requests, accept or refuse them:</h1>
    <table>
        <tr>
            <th>Company VAT Number</th>
            <th>Actions</th>
        </tr>
        <tr ng-repeat="notification in pendingRequests">
            <td>{{notification.individualRequest.thirdParty.vat}}</td>
            <td>
                <button ng-click="acceptRequest(notification.individualRequest.thirdParty.vat)">Accept</button>
                <button ng-click="refuseRequest(notification.individualRequest.thirdParty.vat)">Refuse</button>
            </td>
        </tr>
    </table>

    <h1>All your accepted requests, you can refuse them if you want:</h1>
    <table>
        <tr>
            <th>Company VAT Number</th>
            <th>Action</th>
        </tr>
        <tr ng-repeat="notification in activeRequests">
            <td>{{notification.individualRequest.thirdParty.vat}}</td>
            <td>
                <button ng-click="refuseRequest(notification.individualRequest.thirdParty.vat)">Refuse</button>
            </td>
        </tr>
    </table>

    <div>
        <button ng-controller="individualLogoutController" ng-click="logout()">Logout</button>
    </div>
    <div>
        <button ng-click="backHome()">Back to the Home page</button>
    </div>
</div>

<div ng-controller="individualSettingsController" ng-show="sharedDataService.settings">
    <h1>Settings</h1>
    <h3>Personal data</h3>
    <p>Name: </p>
    <p>Surname: </p>
    <p>...</p>
    <h3>Change your password:</h3>
    <p>Old password: <input type="password" ng-model="settings.oldPassword" title="Insert your current password"
                            required></p>
    <p>New password: <input type="password" ng-model="settings.newPassword" title="Insert your new password"
                            minlength="6" required></p>
    <h3>Your accepted requests:</h3>
    <table>
        <tr>
            <th>Id</th>
            <th>Company VAT Number</th>
            <th>Company name</th>
        </tr>
        <tr ng-repeat="notification in notifications">
            <td>{{$index}}</td>
            <td>{{notification.individualRequest.thirdParty.vat}}</td>
            <td>name</td>
        </tr>
    </table>
    <div>
        <button ng-controller="individualLogoutController" ng-click="logout()">Logout</button>
    </div>
    <div>
        <button ng-click="backHome()">Back to the Home page</button>
    </div>

</div>

<div ng-controller="graphController as graph" ng-show="sharedDataService.home">

    <h2>{{yAxis[0]}}</h2>
    <ul class="chart" style="width:{{width}}px; height:{{height}}px;">
        <!-- Labels -->
        <div class="y" style="width:{{height}}px;">{{yAxis[0]}}</div>
        <div class="x">{{xAxis}}</div>
        <!-- Data -->
        <li ng-repeat="bar in data" class="bar" style="height:{{bar[0].value / max[0] * height}}px; width:{{width / data.length - 5}}px; left:{{$index / data.length * width}}px;"><span><!--{{bar.label}}:-->{{bar[0].value}}</span></li>
    </ul>

    <h2>{{yAxis[1]}}</h2>
    <ul class="chart" style="width:{{width}}px; height:{{height}}px;">
        <!-- Labels -->
        <div class="y" style="width:{{height}}px;">{{yAxis[1]}}</div>
        <div class="x">{{xAxis}}</div>
        <!-- Data -->
        <li ng-repeat="bar in data" class="bar" style="height:{{bar[1].value / max[1] * height}}px; width:{{width / data.length - 5}}px; left:{{$index / data.length * width}}px;"><span><!--{{bar.label}}:-->{{bar[1].value}}</span></li>
    </ul>

    <h2>{{yAxis[2]}}</h2>
    <ul class="chart" style="width:{{width}}px; height:{{height}}px;">
        <!-- Labels -->
        <div class="y" style="width:{{height}}px;">{{yAxis[2]}}</div>
        <div class="x">{{xAxis}}</div>
        <!-- Data -->
        <li ng-repeat="bar in data" class="bar" style="height:{{bar[2].value / max[2] * height}}px; width:{{width / data.length - 5}}px; left:{{$index / data.length * width}}px;"><span><!--{{bar.label}}:-->{{bar[2].value}}</span></li>
    </ul>

    <h2>{{yAxis[3]}}</h2>
    <ul class="chart" style="width:{{width}}px; height:{{height}}px;">
        <!-- Labels -->
        <div class="y" style="width:{{height}}px;">{{yAxis[3]}}</div>
        <div class="x">{{xAxis}}</div>
        <!-- Data -->
        <li ng-repeat="bar in data" class="bar" style="height:{{bar[3].value / max[3] * height}}px; width:{{width / data.length - 5}}px; left:{{$index / data.length * width}}px;"><span><!--{{bar.label}}:-->{{bar[3].value}}</span></li>
    </ul>



</div>
</body>
</html>
