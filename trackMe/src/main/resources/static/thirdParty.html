<!doctype html>
<html>
<title>TrackMe</title>

<script src="js/angular/angular.min.js"></script>
<script src="js/thirdParty.js"></script>
<head>
    <link rel="stylesheet" type="text/css" href="css/thirdParty.css">
</head>

<body ng-app="thirdParty">

<div  ng-controller="thirdPartySignUpController" ng-show="sharedDataService.signUp">
    <h1>Sign Up:</h1>
    <form ng-submit="submitSignUp()">
        <p>VAT: <input type="text" ng-model="thirdParty.vat" size="11" required></p>
        <p>Name: <input type="text" ng-model="thirdParty.name" required></p>
        <p>Password: <input type="text" ng-model="thirdParty.password" required></p>
        <p>I accept the agreement!<input type="checkbox" required ></p>
        <input type="submit" id="submitSignUp" value="Submit">
    </form>
</div>

<div ng-controller="thirdPartyLoginController" ng-show="sharedDataService.login">
    <h1>Login:</h1>
    <form ng-submit="submitLogin()">
        <p>VAT: <input type="text" ng-model="credentials.username" size="16" required></p>
        <p>Password: <input type="password" ng-model="credentials.password" required></p>
        <input type="submit" id="submitLogin" value="Login">
    </form>
</div>

<div ng-controller="thirdPartyController" ng-show="sharedDataService.home">

    <h1>Third Party Home Page</h1>
    <table align="center">
        <tr><th>List of Fiscal Codes:</th></tr>
        <tr ng-repeat="person in people">
            <td>{{person.fiscalCode}}</td>
        </tr>
    </table>

    <h2>Individual Request:</h2>
    <form ng-submit="submitIndividualRequest()">
        <p>Fiscal Code: <input type="text" ng-model="data.individual.fiscalCode" size="16" required></p>
        <p>VAT: <input type="text" ng-model="data.thirdParty.vat" size="16" required></p>
        <p>I want to subscribe to new data<input type="checkbox" ng-model="data.subscribedToNewData"> </p>  <!--TODO:-->
        <input type="submit" id="submitIndividualRequest" value="Submit">
    </form>
    <p ng-bind="indReqResult"></p>

    <h2>Group Request:</h2>
    <form ng-submit="submitGroupRequest()">
        <p>Area: <input type="text" ng-model="data.area" size="16" required></p>
        <p>Age: <input type="text" ng-model="data.age" size="16" required></p>
        <input type="submit" id="submitGroupRequest" value="Submit">
    </form>
    <p ng-bind="GroupReqResult"></p>

    <h2>Other options:</h2>
    <div>
        <button ng-click="showNotifications()">Notifications</button>
    </div>
    <div>
        <button ng-click="showSettings()">Settings</button>
    </div>

    <div>
        <button ng-controller="thirdPartyLogoutController" ng-click="logout()">Logout</button>
    </div>

</div>

<div ng-controller="thirdPartySettingsController" ng-show="sharedDataService.settings">
    <h1>Settings</h1>
    <h3>Third Party Data</h3>
    <p>Name: To be retrieved </p>
    <p>...</p>
    <h3>Change your password:</h3>
    <p>Old password: <input type="password" ng-model="settings.oldPassword" required></p>
    <p>New password: <input type="password" ng-model="settings.newPassword" minlength="6" required></p>

    <div>
        <button ng-click="backHome()">Back to the Home page</button>
    </div>

</div>

<div ng-controller="thirdPartyNotificationsController" ng-show="sharedDataService.notifications">
    <h1>All your requests:</h1>
    <!--<table>
        <tr>
            <th>Fiscal Code</th>
        </tr>
        <tr ng-repeat="notification in notifications">
            <td>{{$index}}</td>
            <td>{{notification}}</td>
        </tr>
    </table>-->

    <table align="center">
        <tr><th>List of Notifications:</th></tr>
        <tr>
            <th>Individual</th>
            <th>Status</th>
            <th>Past data</th>
        </tr>
        <tr ng-repeat="notification in notifications">
            <td>{{notification.individualRequest.individual.fiscalCode}}</td>
            <td>{{notification.individualRequest.accepted}}</td>
            <!-- TODO: link askForPastData()
            <td><button ng-click="askForPastData()">Ask</button></td>
            -->
        </tr>
    </table>

    <div>
        <button ng-click="backHome()">Back to the Home page</button>
    </div>

</div>

</body>
</html>
